<!-- Contact Us -->
<div class="max-w-[85rem] px-4 py-10 sm:px-6 lg:px-8 lg:py-14 mx-auto" id="contact">
    <div class="max-w-2xl lg:max-w-5xl mx-auto">
        <div class="text-center">
            <h1 class="text-3xl font-bold text-gray-800 sm:text-4xl">
                Contáctanos
            </h1>
            <p class="mt-1 text-gray-600">
                Estamos aquí para ayudarte con lo que necesites.
            </p>
        </div>

        <div class="mt-12 grid items-center lg:grid-cols-2 gap-6 lg:gap-16">
            <!-- Card -->
            <div
                class="flex flex-col border border-gray-200 rounded-xl p-4 sm:p-6 lg:p-8"
            >
                <h2 class="mb-8 text-xl font-semibold text-gray-800">
                    Formulario de contacto
                </h2>

                <form>
                    <div class="grid gap-4">
                        <!-- Grid -->
                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                            <div>
                                <label for="name" class="sr-only">Nombre</label>
                                <input
                                    type="text"
                                    name="name"
                                    id="name"
                                    class="py-2.5 sm:py-3 px-4 block w-full border-gray-200 rounded-lg sm:text-sm focus:border-blue-500 focus:ring-blue-500 disabled:opacity-50 disabled:pointer-events-none"
                                    placeholder="Nombre"
                                />
                            </div>

                            <div>
                                <label for="lastname" class="sr-only"
                                    >Apellido</label
                                >
                                <input
                                    type="text"
                                    name="lastname"
                                    id="lastname"
                                    class="py-2.5 sm:py-3 px-4 block w-full border-gray-200 rounded-lg sm:text-sm focus:border-blue-500 focus:ring-blue-500 disabled:opacity-50 disabled:pointer-events-none"
                                    placeholder="Apellido"
                                />
                            </div>
                        </div>
                        <!-- End Grid -->

                        <div>
                            <label for="email" class="sr-only">Correo</label>
                            <input
                                type="email"
                                name="email"
                                id="email"
                                autocomplete="email"
                                class="py-2.5 sm:py-3 px-4 block w-full border-gray-200 rounded-lg sm:text-sm focus:border-blue-500 focus:ring-blue-500 disabled:opacity-50 disabled:pointer-events-none"
                                placeholder="Correo"
                            />
                        </div>

                        <div>
                            <label for="phone" class="sr-only">Teléfono</label>
                            <input
                                type="text"
                                name="phone"
                                id="phone"
                                class="py-2.5 sm:py-3 px-4 block w-full border-gray-200 rounded-lg sm:text-sm focus:border-blue-500 focus:ring-blue-500 disabled:opacity-50 disabled:pointer-events-none"
                                placeholder="Teléfono"
                            />
                        </div>

                        <div>
                            <label for="details" class="sr-only">Detalles</label
                            >
                            <textarea
                                id="details"
                                name="details"
                                rows="4"
                                class="py-2.5 sm:py-3 px-4 block w-full border-gray-200 rounded-lg sm:text-sm focus:border-blue-500 focus:ring-blue-500 disabled:opacity-50 disabled:pointer-events-none"
                                placeholder="Detalles"></textarea>
                        </div>
                    </div>
                    <!-- End Grid -->
                    <div
                        class="flex items-center justify-center w-full py-2.5 sm:py-3 mt-4 border-gray-200 rounded-lg bg-white"
                    >
                        <div
                            class="g-recaptcha"
                            data-sitekey={import.meta.env
                                .PUBLIC_RECAPTCHA_SITE_KEY}
                        >
                        </div>
                    </div>

                    <div class="mt-4 grid">
                        <button
                            type="submit"
                            class="w-full py-3 px-4 inline-flex justify-center items-center gap-x-2 text-sm font-medium rounded-lg border border-transparent bg-blue-600 text-white hover:bg-blue-700 focus:outline-hidden focus:bg-blue-700 disabled:opacity-50 disabled:pointer-events-none"
                            >Enviar</button
                        >
                    </div>

                    <div class="mt-3 text-center">
                        <p class="text-sm text-gray-500">
                            Nos pondremos en contacto contigo lo antes posible.
                        </p>
                    </div>
                </form>
            </div>
            <!-- End Card -->

            <div class="divide-y divide-gray-200">
                <!-- Icon Block -->
                <div class="flex gap-x-7 py-6">
                    <svg
                        class="shrink-0 size-6 mt-1.5 text-gray-800"
                        xmlns="http://www.w3.org/2000/svg"
                        width="24"
                        height="24"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        ><path
                            d="M21.2 8.4c.5.38.8.97.8 1.6v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V10a2 2 0 0 1 .8-1.6l8-6a2 2 0 0 1 2.4 0l8 6Z"
                        ></path><path
                            d="m22 10-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 10"
                        ></path></svg
                    >
                    <div class="grow">
                        <h3 class="font-semibold text-gray-800">
                            Contáctanos por Email
                        </h3>
                        <p class="mt-1 text-sm text-gray-500">
                            Si lo prefieres, puedes enviarnos un correo
                            electrónico y te responderemos lo antes posible.
                        </p>
                        <a
                            class="mt-2 inline-flex items-center gap-x-2 text-sm font-medium text-gray-600 hover:text-gray-800 focus:outline-hidden focus:text-gray-800"
                            href="#"
                        >
                            ateanatunuevoestilo@gmail.com
                        </a>
                    </div>
                </div>
                <!-- End Icon Block -->
                <!-- Icon Block -->
                <div class="flex gap-x-7 py-6">
                    <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="24"
                        height="24"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        class="lucide lucide-phone-icon lucide-phone"
                        ><path
                            d="M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384"
                        ></path></svg
                    >
                    <div class="grow">
                        <h3 class="font-semibold text-gray-800">Teléfono</h3>
                        <p class="mt-1 text-sm text-gray-500">
                            Nos puedes llamar o enviar un mensaje de texto para
                            cualquier consulta o asistencia.
                        </p>
                        <a
                            class="mt-2 inline-flex items-center gap-x-2 text-sm font-medium text-gray-600 hover:text-gray-800 focus:outline-hidden focus:text-gray-800"
                            href="#"
                        >
                            +56 9 1234 5678
                        </a>
                    </div>
                </div>
                <!-- End Icon Block -->

                <!-- Icon Block -->
                <div class="flex gap-x-7 py-6">
                    <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="24"
                        height="24"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        class="lucide lucide-map-pin-house-icon lucide-map-pin-house"
                        ><path
                            d="M15 22a1 1 0 0 1-1-1v-4a1 1 0 0 1 .445-.832l3-2a1 1 0 0 1 1.11 0l3 2A1 1 0 0 1 22 17v4a1 1 0 0 1-1 1z"
                        ></path><path
                            d="M18 10a8 8 0 0 0-16 0c0 4.993 5.539 10.193 7.399 11.799a1 1 0 0 0 .601.2"
                        ></path><path d="M18 22v-3"></path><circle
                            cx="10"
                            cy="10"
                            r="3"></circle></svg
                    >
                    <div class="grow">
                        <h3 class="font-semibold text-gray-800">Ubicación</h3>
                        <p class="mt-1 text-sm text-gray-500">
                            Nos encontramos ubicados en la siguiente dirección:
                        </p>
                        <a
                            class="mt-2 inline-flex items-center gap-x-2 text-sm font-medium text-gray-600 hover:text-gray-800 focus:outline-hidden focus:text-gray-800"
                            href="#"
                        >
                            Pasaje Pedro Vizcarra #46, Aires de Catapilco,
                            Catapilco, Zapallar, Chile
                        </a>
                    </div>
                </div>
                <!-- End Icon Block -->
            </div>
        </div>
    </div>
    <!-- Al final de tu archivo Form.astro, antes de cerrar el último </div> -->
    <script
        type="text/javascript"
        src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"
    ></script>
    <script src="https://www.google.com/recaptcha/api.js" async defer></script>
    <script>
        // Se leen las variables de entorno públicas de Astro
        const publicKey = import.meta.env.PUBLIC_EMAILJS_PUBLIC_KEY;
        const serviceID = import.meta.env.PUBLIC_EMAILJS_SERVICE_ID;
        const templateID = import.meta.env.PUBLIC_EMAILJS_TEMPLATE_ID;
        // Inicializa EmailJS con tu User ID (public key)
        (function () {
            emailjs.init({ publicKey: publicKey }); // Reemplaza con tu User ID de EmailJS
        })();

        // Espera a que todo el contenido de la página esté cargado
        document.addEventListener("DOMContentLoaded", function () {
            const contactForm = document.querySelector("form");

            if (contactForm) {
                contactForm.addEventListener("submit", function (event) {
                    // Previene el comportamiento por defecto del formulario (que es recargar la página)
                    event.preventDefault();

                    // Usa el servicio de EmailJS para enviar los datos del formulario.
                    // La librería detecta automáticamente el widget de reCAPTCHA dentro del formulario.
                    emailjs.sendForm(serviceID, templateID, this).then(
                        (response) => {
                            // Esta función se ejecuta si el envío fue exitoso
                            console.log(
                                "SUCCESS!",
                                response.status,
                                response.text
                            );
                            alert("¡Mensaje enviado correctamente!");
                            contactForm.reset(); // Limpia los campos del formulario
                            grecaptcha.reset(); // Limpia la casilla de reCAPTCHA
                        },
                        (error) => {
                            // Esta función se ejecuta si hubo un error
                            console.log("FAILED...", error);
                            // El error más común será por no completar el reCAPTCHA
                            alert(
                                "Ocurrió un error al enviar el mensaje. Por favor, completa el 'No soy un robot' y vuelve a intentarlo."
                            );
                        }
                    );
                });
            }
        });
    </script>
</div>
<!-- End Contact Us -->
